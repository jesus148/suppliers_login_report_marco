

<!-- COMPONENTE TABLA  -->


<div class="contenedor grid justify-content-center ">

<div class="col-12 md:col-11">


    <p-menubar class="" [model]="items" styleClass="menubar">


        <ng-template  pTemplate="start" class="" styleClass="menubar2">
          <div class="flex mb-2 gap-2 justify-content-end">


            <img src="assets/images/LogoMp2.png" height="38" class="mr-2">



              <p-button
                  (onClick)="activeIndex = 0 "
                  styleClass=" w-8rem h-3rem text-base"
                  [outlined]="activeIndex !== 0"
                  label="Estado Cuenta"
                  [rounded]="true" severity="success"
                 />



              <p-button
                  (onClick)="activeIndex = 1"
                  (onClick)="btnRegistrarBanco = true"
                  styleClass=" w-8rem h-3rem text-base"
                  [outlined]="activeIndex !== 1"
                  label="Estado Banco"
                  [rounded]="true" severity="success" />
          </div>



        </ng-template>

  </p-menubar>


    <div class="ml-7">
        <h4>Proveedor {{usuario}}</h4>
    </div>



  <div class="contenedor_2 grid justify-content-center align-content-center  h-auto">
    <div class="col-11 md:col-11 ">
      <!-- elemento flexible  es para encabezado para el header -->
      <p-card #menu2 styleClass="menu2" [subheader]="'Estado de Cuenta ' " class="h-7rem">

        @if(btnRegistrarBanco){
        <p-button label="Registrar Banco" severity="success" (onClick)="mostrarModal()"/>
        }

        <div>

        <!-- tabla  -->
            <p-tabView [(activeIndex)]="activeIndex">

              <!-- 1 tabla  -->
                <p-tabPanel header=""  >
                  <p-table [styleClass]="'p-datatable-sm'" [tableStyle]="{ 'min-width':'50rem' }" [value]="DataSupliers" >
                    <ng-template pTemplate="header">
                      <tr>
                          <th>Serie_Correl</th>
                          <th>Fecha Emision</th>
                          <th>Fecha Vencimiento</th>
                          <!-- <th>Fecha Programacion</th> -->
                          <th>Moneda</th>
                          <th>Total</th>
                          <th>Monto</th>
                          <th>Saldo</th>
                          <!-- <th></th> -->
                      </tr>
                  </ng-template>
                                  <ng-template pTemplate="body" let-supliers>
                                <tr>
                                    <td>{{ supliers.SERIE_CORREL }}</td>
                                    <!-- lo corta el valor  -->
                                    <td>{{ supliers.Fec_Emision.split(' ')[0] }}</td>
                                    <td>{{ supliers.Fec_VCTO.split(' ')[0] }}</td>
                                    <!-- <td>{{ supliers.Fec_Programacion }}</td> -->
                                    <td>{{ supliers.Moneda }}</td>

                                    <!-- mejora el decimal con 2   -->
                                    <td>{{  supliers.Total_Documento | number:   '1.2-2' }}</td>
                                    <td>{{ supliers.Monto_pagado  | number:   '1.2' }}</td>
                                    <td>{{ supliers.Saldo_pendiente | number :  '1.3'}}</td>
                                    <!-- <td class="text-center flex gap-3" >
                                      <p-button  icon="pi pi-pencil" [text]="true" [raised]="true" />
                                      <p-button  icon="pi pi-times" [text]="true" [raised]="true" />
                                  </td> -->
                                </tr>
                            </ng-template>

                  </p-table>
                </p-tabPanel>

                <!-- 2 tabla  -->
                <p-tabPanel  header="" class="border-white" [closable]="false"  >
                  <p-table [styleClass]="'p-datatable-sm'" [value]="dataSuppliersBanck" >
                    <ng-template pTemplate="header">
                      <tr>
                          <th>Codigo Banco </th>
                          <th>Pais</th>
                          <th>Cuenta </th>
                          <th>Tipo Cuenta</th>
                          <th>Moneda Sap</th>
                          <th>Moneda Sap</th>
                          <th></th>
                      </tr>
                  </ng-template>
                                  <ng-template pTemplate="body" let-supliersbanck>
                                <tr>
                                    <td>{{ supliersbanck.Codigo_Banco }}</td>
                                    <!-- lo corta el valor  -->
                                    <td>{{ supliersbanck.Pais }}</td>
                                    <td>{{ supliersbanck.Cuenta}}</td>
                                    <!-- <td>{{ supliersbanck.Fec_Programacion }}</td> -->
                                    <td>{{ supliersbanck.Tipo_Cuenta }}</td>

                                    <!-- mejora el decimal con 2   -->
                                    <td>{{  supliersbanck.Moneda_SAP }}</td>
                                    <td>{{ supliersbanck.Moneda_Banco   }}</td>
                                    <td>
                                      <p-button icon="pi pi-pencil" [rounded]="true" />


                                    </td>


                                </tr>
                            </ng-template>

                  </p-table>
                </p-tabPanel>

        </p-tabView>

        </div>





      </p-card>
    </div>
  </div>
</div>

</div>







<!-- MODAL ACTUALIZAR CONTRASEÑA -->

<p-dialog header="Actualizar Contraseña" [(visible)]="modalBolean" [style]="{ width: '25rem' , height: '350px' }"  [draggable]="false" [resizable]="false"
  >

  <form [formGroup]="loginForm" (ngSubmit)="restablecer()">

    <div class="flex align-items-center gap-3 mb-3 mt-5 p-2">
        <label for="username" class="font-semibold w-6rem">Usuario</label>
        <input pInputText id="username" class="flex-auto border-1 h-2rem border-round" formControlName="usuario"
        [(ngModel)]="cardCode"  type="text" readonly   />



    </div>
    <div class="flex align-items-center gap-3 mb-5 p-2">
        <label for="email" class="font-semibold w-6rem">Contraseña</label>
        <input pInputText id="email" class="flex-auto border-1 h-2rem border-round" autocomplete="off" formControlName="password"/>
    </div>
    <div class="flex justify-content-evenly gap-2">
        <p-button label="Actualizar" (onClick)="modalBolean = false" type="submit" />
    </div>

  </form>
</p-dialog>






<!-- MODAL REGISTRAR BANCO  -->


<p-dialog header="Registrar Banco" [(visible)]="modalRegistrar" [style]="{ width: '25rem' , height: '350px' }"  [draggable]="false" [resizable]="false"
  >


    <div class="flex align-items-center gap-3 mb-3 mt-5 p-2">
        <label for="username" class="font-semibold w-6rem">Bancos</label>
        <div class="custom-select-container">
          <select name="para" class="custom-select" [(ngModel)]="bankCode">
              <option value="">Seleccione el banco </option>
              @for (user of listaBancos; track user) {
                  <option [value]="user.value">{{ user.name }} </option>
              }
          </select>
      </div>
    </div>


    <div class="flex align-items-center gap-3 mb-5 p-2">
      <label for="email" class="font-semibold w-6rem">Numero de Cuenta</label>
      <input pInputText id="username" class="flex-auto border-1 h-2rem border-round"
      [(ngModel)]="accountNo"  type="text"    />

  </div>




    <div class="flex align-items-center gap-3 mb-5 p-2">
        <label for="email" class="font-semibold w-6rem">
          Divisas
        </label>
        <select name="para" class="custom-select" [(ngModel)]="divisas">
          <option value="">Seleccione las divisas </option>
          @for (user of currency; track user) {
              <option [value]="user.value">{{ user.name }} </option>
          }
      </select>
    </div>




    <div class="flex align-items-center gap-3 mb-5 p-2">
      <label for="email" class="font-semibold w-6rem">
        Tipos de Cuentas
      </label>
      <select name="para" class="custom-select" [(ngModel)]="bankAccountType">
        <option value="">Seleccione tipos de cuentas </option>
        @for (user of accountType; track user) {
            <option [value]="user.value">{{ user.name }} </option>
        }
    </select>
  </div>





    <div class="flex justify-content-evenly gap-2">
        <p-button label="Registrar" type="submit" (onClick)="registrarBank()" />
    </div>


</p-dialog>
